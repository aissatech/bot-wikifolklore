"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[595],{5595:function(e,n,t){t.r(n);var i=t(1413),r=t(9439),l=t(2791),a=t(9850),o=t(9209),c=t(4294),u=t(7621),s=t(9504),d=t(9585),f=(t(3131),t(4554)),h=t(8096),Z=t(4925),v=t(8406),p=t(3786),x=(t(914),t(184));n.default=function(){var e=(0,l.useState)([]),n=(0,r.Z)(e,2),t=n[0],b=n[1],j=(0,l.useState)(""),m=(0,r.Z)(j,2),C=m[0],k=m[1],y=(0,l.useState)("folklore"),g=(0,r.Z)(y,2),w=g[0],S=g[1],T=(0,l.useState)(!1),R=(0,r.Z)(T,2),z=R[0],E=R[1],I=(0,l.useState)(!1),L=(0,r.Z)(I,2),W=L[0],A=L[1],F=(0,l.createRef)(null);(0,l.useEffect)((function(){o.Z.fetchCountries(w).then((function(e){var n=(0,i.Z)({},o.Z.countries);e.forEach((function(e){delete n[e.id]}));var t=Object.entries(n).map((function(e){var n=(0,r.Z)(e,2);return{id:n[0],label:n[1]}}));t.sort((function(e,n){return e.label.localeCompare(n.label)})),b(t)}))}),[w]);var O=(0,l.useCallback)((function(){var e=null===F||void 0===F?void 0:F.current;null!==e&&void 0!==e&&e.length&&(C?(E(!1),A(!0),o.Z.createTopic({country:C,title:w,categories:e}).then((function(e){var n=new URL("/fnf/topic/edit",window.location.origin);n.searchParams.append("id",e.id),window.location.href=n})).finally((function(){A(!1)}))):E(!0))}),[F]);return(0,x.jsxs)(u.Z,{children:[(0,x.jsx)(d.Z,{title:"Add Topic",action:(0,x.jsx)(c.Z,{variant:"contained",color:"primary",onClick:O,children:"Create"})}),(0,x.jsxs)(s.Z,{children:[(0,x.jsxs)(f.Z,{children:[(0,x.jsxs)(h.Z,{size:"small",sx:{minWidth:250,m:1},disabled:W,children:[(0,x.jsx)(Z.Z,{id:"topic",children:"Topic"}),(0,x.jsx)(v.Z,{labelId:"topic",id:"topic",value:w,onChange:function(e){return S(e.target.value)},label:"Topic",children:(0,x.jsx)(p.Z,{value:"folklore",children:"Folklore"})})]}),(0,x.jsxs)(h.Z,{size:"small",sx:{minWidth:250,m:1},disabled:W,children:[(0,x.jsx)(Z.Z,{id:"country",children:"Country"}),(0,x.jsx)(v.Z,{labelId:"country",id:"country",error:z,value:C,onChange:function(e){return k(e.target.value)},label:"Country",children:t.map((function(e){return(0,x.jsx)(p.Z,{value:e.id,children:e.label},e.id)}))})]})]}),(0,x.jsx)(a.Z,{categoryListRef:F,disabled:W})]})]})}}}]);
//# sourceMappingURL=595.f0542db4.chunk.js.map