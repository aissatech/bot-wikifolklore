"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[490],{7490:function(e,n,t){t.r(n);var i=t(1413),r=t(9439),l=t(2791),a=t(6691),o=t(1355),c=t(4294),u=t(7621),s=t(9504),d=t(9585),f=(t(9498),t(4554)),h=t(8096),Z=t(4925),v=t(8406),p=t(3786),x=t(914),b=t(184);n.default=function(){var e=(0,l.useState)([]),n=(0,r.Z)(e,2),t=n[0],j=n[1],k=(0,l.useState)(""),m=(0,r.Z)(k,2),C=m[0],y=m[1],g=(0,l.useState)("folklore"),w=(0,r.Z)(g,2),S=w[0],T=w[1],R=(0,l.useState)(!1),z=(0,r.Z)(R,2),E=z[0],I=z[1],L=(0,l.useState)(!1),W=(0,r.Z)(L,2),A=W[0],F=W[1],O=(0,l.createRef)(null);(0,l.useEffect)((function(){o.Z.fetchCountries(S).then((function(e){var n=(0,i.Z)({},o.Z.countries);e.forEach((function(e){delete n[e.id]}));var t=Object.entries(n).map((function(e){var n=(0,r.Z)(e,2);return{id:n[0],label:n[1]}}));t.sort((function(e,n){return e.label.localeCompare(n.label)})),j(t)}))}),[S]);var P=(0,l.useCallback)((function(){var e=null===O||void 0===O?void 0:O.current;null!==e&&void 0!==e&&e.length&&(C?(I(!1),F(!0),o.Z.createTopic({country:C,title:S,categories:e}).then((function(e){var n=new URL("/tuktukbot/topic/edit",window.location.origin);n.searchParams.append("id",e.id),window.location.href=n})).finally((function(){F(!1)}))):I(!0))}),[O]);return(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(d.Z,{title:"Add Topic",action:(0,b.jsx)(c.Z,{variant:"contained",color:"primary",onClick:P,children:"Create"})}),(0,b.jsxs)(s.Z,{children:[(0,b.jsxs)(f.Z,{children:[(0,b.jsxs)(h.Z,{size:"small",sx:{minWidth:250,m:1},disabled:A,children:[(0,b.jsx)(Z.Z,{id:"topic",children:"Topic"}),(0,b.jsx)(v.Z,{labelId:"topic",id:"topic",value:S,onChange:function(e){return T(e.target.value)},label:"Topic",children:(0,b.jsx)(p.Z,{value:"folklore",children:"Folklore"})})]}),(0,b.jsxs)(h.Z,{size:"small",sx:{minWidth:250,m:1},disabled:A,children:[(0,b.jsx)(Z.Z,{id:"country",children:"Country"}),(0,b.jsx)(v.Z,{labelId:"country",id:"country",error:E,value:C,onChange:function(e){return y(e.target.value)},label:"Country",children:t.map((function(e){return(0,b.jsx)(p.Z,{value:e.id,children:e.label},e.id)}))})]})]}),(0,b.jsx)(a.Z,{categoryListRef:O,disabled:A}),(0,b.jsx)(x.Z,{})]})]})}}}]);
//# sourceMappingURL=490.39ee4ead.chunk.js.map